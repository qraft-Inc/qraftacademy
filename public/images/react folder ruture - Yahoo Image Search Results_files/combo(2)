!function(i,n){"use strict";var t,o,r=i.YAHOO=i.YAHOO||{},e=r.SP=r.SP||{},s=[];function l(){}l.ATTRS={container:{value:null,setter:function(e){if("string"!=typeof e)return e;e=n.querySelectorAll(e);return e[e.length-1]}},item:{value:null},visibilityFeedbackUrl:{value:null},isScrollableModule:{value:!0}},l.prototype={initializer:function(){var e=this,t=e.getInvisibleItems();0<t.length&&(e.set("items",t),e.setEventHandler())},setEventHandler:function(){var e=this,t=e.get("container");r.Event.listen(t,"scroll",e.delayedProcess.bind(e)),r.Event.listen(i,"windowresize",e.process.bind(e)),r.Event.on("containerresize",e.delayedProcess.bind(e),t),e.isContainerHidden()&&r.Event.listen(n,"scroll",e.delayedProcess.bind(e))},getInvisibleItems:function(){var e,t=this,i=[],n=t.get("container");return n&&(e=t.get("item"),0<(n=n.querySelectorAll(e)).length&&n.forEach(function(e){t.isNodeVisible(e)||i.push(e)})),i},delayedProcess:function(){var e=this;t&&clearTimeout(t),t=setTimeout(function(){e.process()},100)},process:function(){var t,i=this;i.get("items").forEach(function(e){"true"!==e.dataset.processed&&i.isNodeVisible(e)&&(e.dataset.processed="true",(t=e.dataset.vf)&&i.addToQueue(t))})},isContainerHidden:function(){var e=this.get("container");return!r.Viewport.inViewport(e)},isNodeVisible:function(e){var t=this.get("container"),t=this.get("isScrollableModule")?r.Viewport.isLeftOfViewport(e)&&r.Viewport.isLeftOfElement(e,t):r.Viewport.elementIsContained(e,t);return t},addToQueue:function(e){var t=this,i=t.get("visibilityFeedbackUrl");-1===s.indexOf(e)&&(s.push(e),o=setTimeout(function(){var e;clearTimeout(o),0<s.length&&(e=i+"&tids="+s.join(","),t.fireBeacon(e)),s=[]},300))},fireBeacon:function(e){var t=new Image;t.onload=t.onerror=function(){t.onload=t.onerror=null,t=null},t.src=e}},e.BingVisibilityFeedback=l}(window,document);